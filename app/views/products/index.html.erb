<ul class="products-grid">
  <% @products.each do |product| %>
    <li class="product-card-wrapper">
      <a href="<%= product_path(product.reference)%>", class="product-card" >
        <div class="product-image">
          <%= image_tag (product.photos_urls[0..1].sample[:full_size] + "?sw=504&sh=672&sm=fit"), class: 'first-picture' %>
          <ul class="all-sizes product-card-sizes">
            <% product.variants.order(:size).each do |variant| %>
              <%= link_to(product_new_booking_path(product.reference, variant.size),
              class: "variant-box little-variant-box#{' unavailable' if variant.stock <= 0}") do %>
                <li class="size<%= " unavailable" if variant.stock <= 0 %>">
                  <%= variant.size %>
                </li>
              <% end %>
            <% end %>
          </ul>
        </div>
        <div class="card-infos">
          <p><%= product.model %></p>
          <div class="prices">
            <% if product.former_price > 0 %>
              <h3 class="new-price"><%= product.french_price %> €</h3>
              <h3 class="standard-price"><%= product.french_former_price %> €</h3>
            <% else %>
              <h3 class="sale-price"><%= product.french_price %> €</h3>
            <% end %>
          </div>
        </div>
      </a>
    </li>
  <% end %>
</ul>
